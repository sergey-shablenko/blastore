<!doctype html>
<meta charset="utf-8" />
<script type="module">
  import { runOne } from './iframe-bench.ts';

  window.addEventListener('message', async (e) => {
    if (e.origin !== location.origin) return;
    const { name, iterations } = e.data || {};
    try {
      const res = await runOne(name, iterations);
      e.source.postMessage(res, e.origin);
    } catch (err) {
      e.source.postMessage({ name, error: String(err) }, e.origin);
    }
  });
</script>
